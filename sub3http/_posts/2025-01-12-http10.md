---
layout: post
title: http10
sitemap: false
hide_last_modified: true
---
# 내 웹 애플리케이션에 접속하기까지

* toc
{:toc .large-only}

## 인터넷 연결과 공유기
인터넷 업체(ISP)는 전화선(혹은 광케이블)을 통해 공인 IP 또는 사설 IP를 할당하여 인터넷을 연결한다.  
대부분의 경우 공인 IP를 할당 받으며, 특수한 경우에 사설 IP를 할당받는다.  

우리가 쓰는 공유기는 할당받은 공인 IP 하나를 여러 장치에서 공유할 수 있도록 NAT(Network Address Translation)를 사용해 사설 IP를 제공한다.  
NAT 덕분에 내부 네트워크의 모든 장치가 공인 IP 하나로 인터넷에 연결될 수 있다.  
이 사설 IP는 로컬 네트워크에 따라 달라지므로, 내 폰을 우리집에서 와이파이에 연결했을 때와 친구네서 연결 했을 때의 IP가 다르다.  

이처럼 공유기를 통한 연결 방식은 무선과 유선으로 나뉜다.  
일반적으로 데스크탑은 무선 연결을 사용할 수도 있지만 보통 공유기를 통한 유선 연결을 쓰는데, **유선 연결**은 신호 간섭이 적고 안정적이어서 속도가 더 빠르며 실시간 작업(예: 게임, 화상회의)에 유리하다.  

---

## 가상 머신을 쓴다면?
만일 컴퓨터에서 VM을 설치하고 NAT를 설정하면 가상 네트워크가 생성된다.  
VM은 컴퓨터가 갖고 있는 사설IP에서 나뉘어진 또 다른 사설IP를 할당받아 호스트(VM을 설치한 컴퓨터)를 통해 인터넷에 연결된다.  
다만, NAT 환경에서는 호스트가 아닌 외부 장치가 VM에 직접 접근할 수 없으며, 접근을 허용하려면 공유기에서 포트 포워딩이나 Bridge를 설정해야 한다.  

### 포트 포워딩과 Bridge 모드
- 포트 포워딩:  
  외부 요청은 공유기의 공인 IP와 포트를 통해 컴퓨터(호스트)로 전달되고, 컴퓨터가 이를 VM으로 중계한다.  
  - 요약 구조:  
    ```
    외부 장치 → 공유기(공인 IP) → 컴퓨터(사설 IP) → VM(가상 네트워크 IP)
    ```

- Bridge 모드:  
  Bridge 모드를 설정하면 VM이 공유기와 동일한 네트워크 대역을 사용하게 된다.  
  VM은 공유기로부터 직접 사설 IP를 할당받아 외부 장치에서 바로 접속할 수 있다.

---

## 접속
Spring Boot로 만든 웹 애플리케이션을 jar 파일로 패키징했다면, 어떤 운영체제에서든 `JRE를 설치`하면 jar 파일을 실행해서 `IP + 포트 + 엔드포인트`로 해당 웹 애플리케이션에 접속할 수 있다.  
만일 도커를 사용할 경우 Dockerfile에 JRE를 설정해준다면 운영체제에 JRE를 설치할 필요 없이 도커 이미지만 실행하면 된다.  

## 도메인 할당
내가 만든 서비스가 아무리 훌륭해도 접근하기 어렵다면 사람들이 이용하지 않을 것이다.  
DNS(Domain Name System)를 통하면 내 서비스가 더 이상 `IP + 포트 + 엔드포인트`가 아닌, 보다 쉬운 `도메인 주소`로 접근할 수 있다. 만약 기본 포트번호(http-8080/https-443)을 사용하지 않으면 도메인에 포트번호까지 포함해야 한다.  
도메인을 등록하려면 `ICANN`이라는 도메인 이름과 IP주소를 관리하는 국제 기구를 통해서 등록해야하는데, 이 과정이 복잡하니 보통은 `Google domains`, `카페24`와 같은 도메인 등록 대행업체를 사용한다.  