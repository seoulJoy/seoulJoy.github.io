---
layout: post
title: java23
sitemap: false
hide_last_modified: true
---
# DDD 01 - 구조

* toc
{:toc .large-only}

도메인 주도 설계(DDD)는 비즈니스 요구사항을 중심으로 시스템을 설계하는 방법론이다. 이를 이용해 쇼핑몰 시스템을 설계한다고 가정해보자. DDD의 구조는 크게 `표현`, `응용`, `도메인`, `인프라스트럭처`의 4계층으로 나누어진다. 각각의 계층은 명확한 역할을 가지고 있으며, 하위 계층은 상위 계층에 의존할 수 없다는 원칙을 따른다.

## 표현 (Presentation)

사용자와의 상호작용을 담당하는 계층으로, 사용자 요청을 응용 계층으로 전달하고 그 결과를 사용자에게 반환하는 역할을 한다. 예를 들어, HTTP 요청을 받아 이를 응용 계층에 전달한 뒤, 응답을 다시 HTTP 응답으로 변환해 사용자에게 전송하는 과정이 여기에 해당한다. 스프링 MVC 같은 프레임워크가 이 계층을 처리한다.

## 응용 (Application)

응용 계층은 시스템이 제공해야 할 기능을 도메인 모델을 활용해 구현한다. 이 계층에서는 복잡한 비즈니스 로직을 직접 처리하기보다는, 그 처리를 도메인 계층에 위임하는 역할을 한다. 응용 계층은 주로 비즈니스 규칙의 흐름을 관리하며, 트랜잭션 처리와 같은 기술적인 요소를 관리할 수도 있다.

## 도메인 (Domain)

도메인 계층은 핵심 비즈니스 로직이 구현된 계층이다. 여기서 실제 비즈니스 규칙이 적용되며, 도메인의 다양한 객체들이 협력해 문제를 해결한다. 도메인 객체는 `엔티티(Entity)`, `밸류 객체(Value Object)`, 그리고 `애그리거트(Aggregate)`로 구성된다.

### 엔티티 (Entity)

엔티티는 고유한 식별자를 가지며, 주로 비즈니스에서 중요한 객체이다. 예를 들어, 쇼핑몰 시스템에서는 `고객`이나 `주문` 같은 객체들이 엔티티가 될 수 있다. 이 객체들은 시스템 내에서 지속적으로 변화하면서도 고유한 식별자를 통해 식별된다.

### 밸류 객체 (Value Object)

밸류 객체는 엔티티의 속성을 보완하는 불변 객체로, 식별자는 없지만 중요한 정보를 포함한다. 예를 들어 `주소`, `받는 사람 정보`와 같은 정보가 밸류 객체가 될 수 있다. 이 객체는 값 변경이 불가능하고, 새로운 값을 가진 객체를 생성해 사용한다.

```java
public class Address {
    private String zipcode;
    private String basicAddress;
    private String detailAddress;
}
```

### 애그리거트 (Aggregate)

애그리거트는 논리적으로 관련된 여러 엔티티와 밸류 객체를 하나의 그룹으로 묶어, 비즈니스의 한 단위로 취급하는 개념이다. 예를 들어, 쇼핑몰 시스템에서 `주문` 애그리거트는 `고객` 엔티티와 `주소` 밸류 객체를 포함할 수 있다. 각 애그리거트는 `루트 엔티티(Root Entity)`를 통해 다른 객체들과의 관계를 관리하며, 외부에서는 루트 엔티티만을 통해서 접근이 가능하다.

```java
루트 엔티티: 주문
- 주문 ID
- 주문 일자
- 주문 상태
- 상품 정보(상품 엔티티 참조)
```

## 인프라스트럭처 (Infrastructure)

인프라스트럭처 계층은 시스템 구현을 위한 기술적인 세부사항을 처리한다. 주로 RDBMS와 같은 데이터베이스와의 연동, 메시지 큐(MQ)를 통한 비동기 메시징 처리 등을 담당하며, 응용 및 도메인 계층에서 사용되는 기술적 서비스를 제공한다.

---

이와 같은 4계층 구조를 통해 시스템을 설계하면, 각 계층이 명확한 책임을 가지며 상호 간의 의존성을 최소화할 수 있다.